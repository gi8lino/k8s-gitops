---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: envoy-external-tls
  namespace: network
spec:
  secretName: external-${BASE_DOMAIN/./-}-tls
  issuerRef:
    name: letsencrypt
    kind: ClusterIssuer
  commonName: ${BASE_DOMAIN}
  dnsNames:
    - ${BASE_DOMAIN}
    - "*.${BASE_DOMAIN}"
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: envoy-internal-tls
  namespace: network
spec:
  secretName: internal-${BASE_DOMAIN/./-}-tls
  issuerRef:
    name: letsencrypt
    kind: ClusterIssuer
  commonName: ${BASE_DOMAIN}
  dnsNames:
    - ${BASE_DOMAIN}
    - "*.local.${BASE_DOMAIN}"
